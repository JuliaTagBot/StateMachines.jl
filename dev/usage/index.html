<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage ¬∑ StateMachines.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>StateMachines.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li class="current"><a class="toctext" href>Usage</a><ul class="internal"><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#System-description-1">System description</a></li><li><a class="toctext" href="#State-machines-1">State machines</a></li></ul></li><li><a class="toctext" href="../examples/">Examples</a></li><li><a class="toctext" href="../internals/">Internals</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Usage</a></li></ul><a class="edit-page" href="https://github.com/pbayer/StateMachines.jl/blob/master/docs/src/usage.md"><span class="fa">ÔÇõ</span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Usage</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="User-guide-1" href="#User-guide-1">User guide</a></h1><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p><code>StateMachines.jl</code> can be ‚Äì once it is registered ‚Äì installed with</p><pre><code class="language-julia">pkg&gt; add StateMachines</code></pre><p>`The development version is installed with</p><pre><code class="language-julia">pkg&gt; add(&quot;https://github.com/pbayer/StateMachines.jl&quot;)</code></pre><p>The package is then loaded with</p><pre><code class="language-julia-repl">julia&gt; using StateMachines</code></pre><h2><a class="nav-anchor" id="System-description-1" href="#System-description-1">System description</a></h2><p>A system has different levels, which are used to hide complexity.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="StateMachines.System" href="#StateMachines.System"><code>StateMachines.System</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><p>An abstract type for <code>Box</code>, <code>Block</code> and <code>Process</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/StateMachines.jl/blob/610e051aa2b009c4458c099e011531b14759a867/src/types.jl#L15">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="StateMachines.Box" href="#StateMachines.Box"><code>StateMachines.Box</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Box(id::Id, clk::Clock)</code></pre><p>A box is the outermost container of blocks and processes. It has one or more input channels and one or more output channels. It cannot contain other boxes, but it can interact with other boxes.</p><p><strong>Arguments, Fields</strong></p><ul><li><code>id::Id</code>: an identifier string</li><li><code>clk::Clock</code>: the system clock, this may be a clock shared with other boxes,</li><li><code>state::State</code>:</li><li><code>gate::Dict{Id, Channel}</code>: a dictionary of channels,</li><li><code>childs::Dict{Id, System}</code>: a dictionary of registered blocks or processes.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/StateMachines.jl/blob/610e051aa2b009c4458c099e011531b14759a867/src/types.jl#L80-L93">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="StateMachines.Block" href="#StateMachines.Block"><code>StateMachines.Block</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Block(id::Id, surr::System)</code></pre><p>A block is a container of blocks and processes. It has one or more input and one or more output channels. It registers to a <code>System</code>.</p><p><strong>Arguments, Fields</strong></p><ul><li><code>id::Id</code>: each block in a surrounding has to have an unique identifier,</li><li><code>surr::System</code>: this links to the surrounding <code>Block</code> or <code>System</code>,</li><li><code>state::State</code>:</li><li><code>gate::Dict{Id, Channel}</code>: a dictionary of channels,</li><li><code>childs::Dict{Id, System}</code>: a dictionary of registered agents.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/StateMachines.jl/blob/610e051aa2b009c4458c099e011531b14759a867/src/types.jl#L105-L117">source</a></section><p><code>StateMachine</code> and <code>Process</code> are used to describe the activities of a system:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="StateMachines.StateMachine" href="#StateMachines.StateMachine"><code>StateMachines.StateMachine</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">StateMachine</code></pre><p>An abstract type for StateMachines. It is used to declare concrete state machines in an implementation.</p><p><strong>Example</strong></p><pre><code class="language-julia">using StateMachines, Simulate

struct SM1 &lt;: StateMachine end       # first you declare some state machine types
struct SM2 &lt;: StateMachine end       # you want to use

S1 = Box(&quot;Box&quot;, ùê∂)                   # then you build a system,
B1 = Block(&quot;B1&quot;, S1)                 # maybe containing one or more blocks

P1 = Process(&quot;P1&quot;, SM1(), B1)        # processes inside a block act as state machines
P2 = Process(&quot;P2&quot;, SM2(), B1)

function step!(A::Process{SM1}, ::Idle, œÉ::Load)  # transition functions define the
    [....]                                        # activities of a process, maybe
end                                               # using other functions
function step!(A::Process{SM1}, ::Busy, œÉ::Fail) = [....]
function step!(A::Process{SM1}, ::Failed, ::Repair) = [....]
[....]

while true                           # later at runtime
    event = put!(P1.gate[‚Äúin‚Äù])      # an event is read from an input channel
    step!(P1, P1.state, event)       # and a process transition is called
end                                  # depending on its state and an incoming event</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/StateMachines.jl/blob/610e051aa2b009c4458c099e011531b14759a867/src/types.jl#L18-L49">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="StateMachines.Process" href="#StateMachines.Process"><code>StateMachines.Process</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Process{SM}(id::Id, sm::SM, surr::System) where {SM &lt;: StateMachine}</code></pre><p>A process is a container for a state machine. It cannot contain other processes. It has one input and one output channel. It registers to a <code>Block</code> or a <code>System</code>.</p><p><strong>Arguments, Fields</strong></p><ul><li><code>id::Id</code>: each process in a box or a block has to have an unique identifier,</li><li><code>sm::SM</code>: a state machine identifier</li><li><code>surr::System</code>: links to the surrounding <code>Block</code> or <code>System</code>,</li><li><code>state::State</code>: this is read and changed by the process&#39;s state machine,</li><li><code>gate::Dict{Id, Channel}</code>: events and tokens flow through the gates, each gate   has an unique identifier.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/StateMachines.jl/blob/610e051aa2b009c4458c099e011531b14759a867/src/types.jl#L129-L142">source</a></section><h2><a class="nav-anchor" id="State-machines-1" href="#State-machines-1">State machines</a></h2><h3><a class="nav-anchor" id="States-1" href="#States-1">States</a></h3><h3><a class="nav-anchor" id="Events-1" href="#Events-1">Events</a></h3><h3><a class="nav-anchor" id="Transitions-1" href="#Transitions-1">Transitions</a></h3><h3><a class="nav-anchor" id="Operation-1" href="#Operation-1">Operation</a></h3><footer><hr/><a class="previous" href="../overview/"><span class="direction">Previous</span><span class="title">Overview</span></a><a class="next" href="../examples/"><span class="direction">Next</span><span class="title">Examples</span></a></footer></article></body></html>
